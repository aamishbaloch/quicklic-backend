{% extends "portal/base.html" %}
{% load static %}

{% block body_block %}
    <section id="content">
      <section class="vbox">
        <section class="scrollable padder">
          <div class="m-b-md">
            <div class="row">
              <div class="col-sm-6">
                <h3 class="m-b-none m-t-sm">Quick<b>Stats</b> <small>Last 7 days Statistics</small> </h3>
              </div>
            </div>
          </div>

            {% if doctor_stats %}
                <!-- Doctor Statistics START-->
                <div class="m-b-md">
                        <div class="row">
                          <div class="col-sm-6">
                            <h3 class="m-b-none m-t-sm">{{ doctor_stats.doctor_name }}</h3>
                          </div>
                          <div class="col-sm-6">
                            <div class="text-right text-left-xs">
                              <div class="sparkline m-l m-r-lg pull-right" data-type="bar" data-height="35" data-bar-width="6" data-bar-spacing="2" data-bar-color="#fb6b5b">5,8,9,12,8,10,8,9,7,8,6</div>
                              <div class="m-t-sm">
                                <span class="text-uc">Total Appointments</span>
                                <div class="h4"><strong>{{ doctor_stats.appointment_count }}</strong></div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                <div class="row">
                        <div class="col-lg-4">
                          <section class="panel panel-default">
                            <header class="panel-heading">
                              Completed Appointments
                            </header>
                            <div class="panel-body text-center">
                              <h4>{{ doctor_stats.appointment_done_count }}</h4>
                              <small class="text-muted block">Appointments</small>
                              <div class="inline">
                                <div class="easypiechart" data-percent="{{ doctor_stats.appointment_done_percentage }}" data-line-width="30" data-track-color="#eee" data-bar-color="#afcf6f" data-scale-color="#fff" data-size="188" data-line-cap='butt'>
                                  <span class="h2 step">{{ doctor_stats.appointment_done_percentage|floatformat:1 }}</span>%
                                </div>
                              </div>
                            </div>
                            <div class="panel-footer"><small>% of Completed Appointments</small></div>
                          </section>
                        </div>
                        <div class="col-lg-4">
                          <section class="panel panel-default">
                            <header class="panel-heading">
                              No Shows
                            </header>
                            <div class="panel-body text-center">
                              <h4>{{ doctor_stats.appointment_noshow_count }}</h4>
                              <small class="text-muted block">Appointments</small>
                              <div class="inline">
                                <div class="easypiechart" data-percent="{{ doctor_stats.appointment_noshow_percentage }}" data-line-width="30" data-track-color="#eee" data-bar-color="#afcf6f" data-scale-color="#fff" data-size="188" data-line-cap='butt'>
                                  <span class="h2 step">{{ doctor_stats.appointment_noshow_percentage|floatformat:1 }}</span>%
                                </div>
                              </div>
                            </div>
                            <div class="panel-footer"><small>% of No Shows</small></div>
                          </section>
                        </div>
                        <div class="col-lg-4">
                          <section class="panel panel-default">
                            <header class="panel-heading">
                              Cancelled Appointments
                            </header>
                            <div class="panel-body text-center">
                              <h4>{{ doctor_stats.appointment_cancel_count }}</h4>
                              <small class="text-muted block">Appointments</small>
                              <div class="inline">
                                <div class="easypiechart" data-percent="{{ doctor_stats.appointment_cancel_percentage }}" data-line-width="30" data-track-color="#eee" data-bar-color="#afcf6f" data-scale-color="#fff" data-size="188" data-line-cap='butt'>
                                  <span class="h2 step">{{ doctor_stats.appointment_cancel_percentage|floatformat:1 }}</span>%
                                </div>
                              </div>
                            </div>
                            <div class="panel-footer"><small>% of Cancelled Appointments</small></div>
                          </section>
                        </div>
                        <div class="col-lg-4">
                          <section class="panel panel-default">
                            <header class="panel-heading">
                              Discarded Appointments
                            </header>
                            <div class="panel-body text-center">
                              <h4>{{ doctor_stats.appointment_discard_count }}</h4>
                              <small class="text-muted block">Appointments</small>
                              <div class="inline">
                                <div class="easypiechart" data-percent="{{ doctor_stats.appointment_discard_percentage }}" data-line-width="30" data-track-color="#eee" data-bar-color="#afcf6f" data-scale-color="#fff" data-size="188" data-line-cap='butt'>
                                  <span class="h2 step">{{ doctor_stats.appointment_discard_percentage|floatformat:1 }}</span>%
                                </div>
                              </div>
                            </div>
                            <div class="panel-footer"><small>% of Discarded Appointments</small></div>
                          </section>
                        </div>
                        <div class="col-lg-4">
                          <section class="panel panel-default">
                            <header class="panel-heading">
                              Other Appointments
                            </header>
                            <div class="panel-body text-center">
                              <h4>{{ doctor_stats.appointment_other_count }}</h4>
                              <small class="text-muted block">Appointments</small>
                              <div class="inline">
                                <div class="easypiechart" data-percent="{{ doctor_stats.appointment_other_percentage }}" data-line-width="30" data-track-color="#eee" data-bar-color="#afcf6f" data-scale-color="#fff" data-size="188" data-line-cap='butt'>
                                  <span class="h2 step">{{ doctor_stats.appointment_other_percentage|floatformat:1 }}</span>%
                                </div>
                              </div>
                            </div>
                            <div class="panel-footer"><small>% of Other(Pending/Confirm) Appointments</small></div>
                          </section>
                        </div>
                        <div class="col-lg-4">
                          <section class="panel panel-default">
                            <header class="panel-heading">
                              Clinics
                            </header>
                            <div class="panel-body text-center">
                              <h4>{{ doctor_stats.clinic_count }}</h4>
                              <small class="text-muted block">Clinic(s) Involved</small>
                                <div class="line pull-in"></div>
                                <div class="sparkline inline" data-type="pie" data-height="150" data-slice-colors="{{ doctor_stats.appointment_clinic_colors }}">
                                      {% for clinic in doctor_stats.clinics_appointment_count %}
                                        {{ clinic.percentage|floatformat:1 }},
                                      {% endfor %}
                                </div>
                                <div class="line pull-in"></div>
                                <div class="text-xs">
                                  {% for clinic in doctor_stats.clinics_appointment_count %}
                                      <i class="fa fa-circle" style="color:{{ clinic.color }};"></i> {{ clinic.name }}
                                  {% endfor %}
                                </div>
                            </div>
                          </section>
                        </div>
                      </div>
                <!-- Doctor Statistics END -->
            {% endif %}

            {% if admin_stats %}
                <!-- Admin Statistics START-->
                <div class="m-b-md">
                        <div class="row">
                          <div class="col-sm-6">
                            <h3 class="m-b-none m-t-sm">{{ admin_stats.admin_name }}</h3>
                          </div>
                          <div class="col-sm-6">
                            <div class="text-right text-left-xs">
                              <div class="sparkline m-l m-r-lg pull-right" data-type="bar" data-height="35" data-bar-width="6" data-bar-spacing="2" data-bar-color="#fb6b5b">5,8,9,12,8,10,8,9,7,8,6</div>
                              <div class="m-t-sm">
                                <span class="text-uc">Total Clinics</span>
                                <div class="h4"><strong>{{ admin_stats.clinic_count }}</strong></div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    <div class="row">
                        <div class="col-md-6">
                          <section class="panel panel-default">
                            <header class="panel-heading">
                              Clinic - All Appointments
                            </header>
                            <div class="panel-body text-center">
                              <h4>{{ admin_stats.clinic_count }}</h4>
                              <small class="text-muted block">Clinic(s) Involved</small>
                                <div class="line pull-in"></div>
                                <div class="sparkline inline" data-type="pie" data-height="188" data-slice-colors="{{ admin_stats.clinics_colors_data }}">
                                      {% for clinic in admin_stats.clinics_data %}
                                        {{ clinic.clinic_appointment_percentage|floatformat:1 }},
                                      {% endfor %}
                                </div>
                                <div class="line pull-in"></div>
                                <div class="text-xs">
                                  {% for clinic in admin_stats.clinics_data %}
                                      <i class="fa fa-circle" style="color:{{ clinic.clinic_color }};"></i> {{ clinic.clinic_name }}
                                  {% endfor %}
                                </div>
                            </div>
                          </section>
                        </div>
                        <div class="col-md-6">
                          <section class="panel panel-default">
                            <header class="panel-heading">
                              Clinic - Completed Appointments
                            </header>
                            <div class="panel-body text-center">
                              <h4>{{ admin_stats.clinic_count }}</h4>
                              <small class="text-muted block">Clinic(s) Involved</small>
                                <div class="line pull-in"></div>
                                <div class="sparkline inline" data-type="pie" data-height="188" data-slice-colors="{{ admin_stats.clinics_colors_data }}">
                                      {% for clinic in admin_stats.clinics_data %}
                                        {{ clinic.clinic_appointment_done_percentage|floatformat:1 }},
                                      {% endfor %}
                                </div>
                                <div class="line pull-in"></div>
                                <div class="text-xs">
                                  {% for clinic in admin_stats.clinics_data %}
                                      <i class="fa fa-circle" style="color:{{ clinic.clinic_color }};"></i> {{ clinic.clinic_name }}
                                  {% endfor %}
                                </div>
                            </div>
                          </section>
                        </div>
                        <div class="col-md-6">
                          <section class="panel panel-default">
                            <header class="panel-heading">
                              Clinic - No Show Appointments
                            </header>
                            <div class="panel-body text-center">
                              <h4>{{ admin_stats.clinic_count }}</h4>
                              <small class="text-muted block">Clinic(s) Involved</small>
                                <div class="line pull-in"></div>
                                <div class="sparkline inline" data-type="pie" data-height="188" data-slice-colors="{{ admin_stats.clinics_colors_data }}">
                                      {% for clinic in admin_stats.clinics_data %}
                                        {{ clinic.clinic_appointment_noshow_percentage|floatformat:1 }},
                                      {% endfor %}
                                </div>
                                <div class="line pull-in"></div>
                                <div class="text-xs">
                                  {% for clinic in admin_stats.clinics_data %}
                                      <i class="fa fa-circle" style="color:{{ clinic.clinic_color }};"></i> {{ clinic.clinic_name }}
                                  {% endfor %}
                                </div>
                            </div>
                          </section>
                        </div>
                      </div>
                <!-- Admin Statistics END -->
            {% endif %}

        </section>
      </section>
    </section>
{% endblock %}